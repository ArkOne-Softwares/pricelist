var h=(s,r,t)=>new Promise((o,e)=>{var n=c=>{try{l(t.next(c))}catch(f){e(f)}},i=c=>{try{l(t.throw(c))}catch(f){e(f)}},l=c=>c.done?o(c.value):Promise.resolve(c.value).then(n,i);l((t=t.apply(s,r)).next())});import{c as m,r as y,a as L,b as P,d as E,_ as I,e as k,f as w,g as R,o as b,h as C,i as O,s as A,j as S,k as j,C as $,I as H,l as N,m as U,n as V}from"./vendor.949cd908.js";const q=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function t(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(e){if(e.ep)return;e.ep=!0;const n=t(e);fetch(e.href,n)}};q();const x="modulepreload",_={},B="/assets/pricelist/frontend/",v=function(r,t){return!t||t.length===0?r():Promise.all(t.map(o=>{if(o=`${B}${o}`,o in _)return;_[o]=!0;const e=o.endsWith(".css"),n=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${n}`))return;const i=document.createElement("link");if(i.rel=e?"stylesheet":x,e||(i.as="script",i.crossOrigin=""),i.href=o,document.head.appendChild(i),e)return new Promise((l,c)=>{i.addEventListener("load",l),i.addEventListener("error",c)})})).then(()=>r())},p=m({url:"frappe.auth.get_logged_user",cache:"User",onError(s){s&&s.exc_type==="AuthenticationError"&&d.push({name:"LoginPage"})}});function g(){let r=new URLSearchParams(document.cookie.split("; ").join("&")).get("user_id");return r==="Guest"&&(r=null),r}const u=y({login:m({url:"login",makeParams({email:s,password:r}){return{usr:s,pwd:r}},onSuccess(s){p.reload(),u.user=g(),u.login.reset(),d.replace(s.default_route||"/")}}),logout:m({url:"logout",onSuccess(){p.reset(),u.user=g(),d.replace({name:"Login"})}}),user:g(),isLoggedIn:L(()=>!!u.user)}),D=[{path:"/",name:"Home",component:()=>v(()=>import("./Home.6aaf8b03.js"),["assets/Home.6aaf8b03.js","assets/vendor.949cd908.js","assets/vendor.21799cd7.css"])},{path:"/:invalidpath",name:"Invalid Page",component:()=>v(()=>import("./InvalidPage.96ca79e3.js"),["assets/InvalidPage.96ca79e3.js","assets/vendor.949cd908.js","assets/vendor.21799cd7.css"])}];let d=P({history:E("/pricelist"),routes:D});d.beforeEach((s,r,t)=>h(void 0,null,function*(){let o=u.isLoggedIn;try{yield p.promise}catch(e){o=!1}s.name==="Login"&&o?t({name:"Home"}):o?s.matched.length===0?t({name:"Invalid Page"}):t():window.location.href="/login?redirect-to=/pricelist"}));const F={};function T(s,r){const t=R("router-view");return b(),k("div",null,[w(t)])}var W=I(F,[["render",T]]);const G=C({components:U,directives:V});let a=O(W);A("resourceFetcher",N);a.use(d);a.use(S);a.component("Button",j);a.component("Card",$);a.component("Input",H);a.use(G);a.mount("#app");export{u as s};
